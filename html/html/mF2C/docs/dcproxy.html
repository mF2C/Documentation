

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>dataClay (dcproxy) &mdash; mF2C 1.0 (2018-03-21) documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> mF2C
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">New</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">mF2C</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>dataClay (dcproxy)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/mF2C/docs/dcproxy.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dataclay-dcproxy">
<h1>dataClay (dcproxy)<a class="headerlink" href="#dataclay-dcproxy" title="Permalink to this headline">¶</a></h1>
<p>The mF2C system uses dataClay to store, distribute and synchronize infrastructure resources.</p>
<p>dataClay is a distributed data store that enables applications to store and access objects in the same format they have in memory, and executes object methods within the data store. These two main features accelerate both the development of applications and their execution.</p>
<p>In addition, dataClay enables the execution of code next to the data. By moving computation close to the data, dataClay reduces the amount and size of data transfers between the application and the data store, thus improving performance of applications.</p>
<p>More documentation about dataClay can be found at
<a class="reference external" href="https://www.bsc.es/dataClay">https://www.bsc.es/dataClay</a></p>
<p>For mF2c infrastructure we have defined three components for dataClay dcproxy, logicmodule1, ds1java1</p>
<p>It is very important to have same versions in all sub-components.</p>
<div class="section" id="dcproxy-component">
<h2>dcproxy component<a class="headerlink" href="#dcproxy-component" title="Permalink to this headline">¶</a></h2>
<p>The dataclay-proxy component is actually an application that uses dataClay to store, retrieve, modify and distribute objects.</p>
<p>mF2c resources are defined at <a class="reference external" href="https://github.com/mF2C/dataClay/tree/master/data_management/model/src/CIMI">https://github.com/mF2C/dataClay/tree/master/data_management/model/src/CIMI</a></p>
<p>CIMI component calls dcproxy for each supported acction.</p>
<p>The dataclay-proxy application is also responsible of registering needed information in dataClay to allow synchronization between agents. This is done through the Agent resource.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<p>Check following wiki to change mF2C resources in dataClay:</p>
<p><a class="reference external" href="https://github.com/mF2C/dataClay/wiki/dataClay-Mf2c---a-developers-guide-for-modelling-CIMI-resources">https://github.com/mF2C/dataClay/wiki/dataClay-Mf2c—a-developers-guide-for-modelling-CIMI-resources</a></p>
<p>CIMI component calls dcproxy for each supported acction.</p>
<p>| CIMI action  | dataclay-proxy function |
| ————- | ————- |
| Add (create)  | void create(final String type, final String id, final String data)   |
| Read | String read(final String type, final String id)  |
| Edit (update) | String update(final String type, final String id, final String data)  |
| Delete | delete(final String type, final String id)  |</p>
<p>where:</p>
<ul class="simple">
<li><p>type: resource type (device, device-dynamic, …)</p></li>
<li><p>id: resource CIMI id</p></li>
<li><p>data: JSON with CIMI data of the resource</p></li>
<li><p>String return: JSON data with updated or read resource</p></li>
</ul>
<p>Note that resources are JSON objects.</p>
<p>Agent resource fields used by dataClay:</p>
<ul class="simple">
<li><p>device_ip: The dataClay of an agent is identified by provided ip</p></li>
<li><p>leader_ip: All objects of resources marked as &#64;ReplicateInLeader stored in current agent or current children will be automatically replicated and synchronized in leader agent</p></li>
<li><p>backup_ip:All objects of resources marked as &#64;ReplicateInLeader stored in current agent will be automatically replicated and synchronized in backup agent</p></li>
<li><p>childrenIPs: dataClay uses this field to detect if some agent left.</p></li>
</ul>
<p>Any update of those fields will move and synchronize objects automatically.</p>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="changelog">
<h2>CHANGELOG<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>2.24 (27.09.2019)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="added">
<h4>Added<a class="headerlink" href="#added" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Healthcheck</p></li>
<li><p>Implemented secure inter-dataClay communication through traefik</p></li>
</ul>
</div>
<div class="section" id="changed">
<h4>Changed<a class="headerlink" href="#changed" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, mF2C

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>